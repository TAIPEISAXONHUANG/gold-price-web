<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>å·§å“ç å¯¶ | å°åŒ—é«˜åƒ¹é»ƒé‡‘å›æ”¶ï¼Ké‡‘ç™½é‡‘è²·è³£ï¼å³æ™‚å ±åƒ¹æŸ¥è©¢</title>
  <meta name="description" content="å°åŒ—å¤§å®‰å€å¯¦é«”åº—é¢ï¼Œå°ˆç‡Ÿé»ƒé‡‘å›æ”¶ã€ç™½é‡‘ã€Ké‡‘ã€é‘½çŸ³è²·è³£ã€‚æä¾›æ¯æ—¥æœ€æ–°å³æ™‚é‡‘åƒ¹æŸ¥è©¢èˆ‡ç·šä¸Šè©¦ç®—ã€‚èª ä¿¡ç¶“ç‡Ÿåé¤˜å¹´ï¼Œé«˜åƒ¹ç¾é‡‘å›æ”¶ï¼Œæ­¡è¿é ç´„ä¼°åƒ¹ã€‚">
  <meta name="keywords" content="æ¯æ—¥é‡‘åƒ¹, ä»Šå¤©é‡‘åƒ¹å¤šå°‘, é‡‘åƒ¹æŸ¥è©¢, å°ç£é‡‘åƒ¹, é»ƒé‡‘å›æ”¶, Ké‡‘å›æ”¶, ç™½é‡‘å›æ”¶, é‰‘é‡‘å›æ”¶, é£¾é‡‘å›æ”¶, èˆŠé‡‘å›æ”¶, é»ƒé‡‘ä¸€éŒ¢å¤šå°‘, å°åŒ—éŠ€æ¨“æ¨è–¦, é«˜åƒ¹æ”¶è³¼é»ƒé‡‘, è²´é‡‘å±¬è²·è³£, é‘½çŸ³å›æ”¶, å·§å“ç å¯¶">
  <meta name="author" content="å·§å“ç å¯¶ HUANG JIA FEI LI">
  <meta name="robots" content="index, follow, max-image-preview:large">
  
  <meta property="og:type" content="business.business">
  <meta property="og:title" content="å·§å“ç å¯¶ | å°åŒ—é«˜åƒ¹é»ƒé‡‘å›æ”¶">
  <meta property="og:description" content="å°åŒ—é«˜åƒ¹é»ƒé‡‘å›æ”¶é¦–é¸ï¼æ¯æ—¥æ›´æ–°å³æ™‚é‡‘åƒ¹ï¼Œæä¾›ç·šä¸Šè©¦ç®—åŠŸèƒ½ã€‚">
  <meta property="og:site_name" content="å·§å“ç å¯¶">
  <meta property="og:locale" content="zh_TW">

  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/vue@3/dist/vue.global.js" defer></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" media="print" onload="this.media='all'">
  <script src="https://cdn.jsdelivr.net/npm/chart.js" defer></script>

  <style>
    :root { --brand-red: #8B0000; --brand-gold: #D4AF37; }
    
    body.locked {
        overflow: hidden !important;
        height: 100vh !important;
        position: fixed;
        width: 100%;
    }
    html, body { overflow-anchor: none; scroll-behavior: auto !important; }
    .interaction-disabled { pointer-events: none !important; cursor: wait !important; }
    .text-gold { color: var(--brand-gold); }
    .font-nums { font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; }
    .table-header { background-color: #FEF2F2; color: #7F1D1D; font-weight: bold; padding: 12px 8px; border-bottom: 1px solid #FECACA; text-align: center; font-size: 0.9rem; white-space: nowrap; }
    .table-cell { padding: 12px 8px; border-bottom: 1px solid #F3F4F6; text-align: center; font-family: 'Segoe UI', sans-serif; font-size: 0.95rem; }
    button:focus { outline: none; }
    .article-body { line-height: 1.8; color: #374151; font-size: 1.1rem; }
    .article-body p { margin-bottom: 1.5em; }
    .article-body img { max-width: 100%; border-radius: 8px; margin: 10px 0; display: block; }
    .text-super-pop { text-shadow: 2px 2px 0px rgba(0, 0, 0, 0.8), -2px -2px 0px rgba(0, 0, 0, 0.8), 2px -2px 0px rgba(0, 0, 0, 0.8), -2px 2px 0px rgba(0, 0, 0, 0.8), 0px 4px 8px rgba(0,0,0,0.6); }
    .transition-opacity { transition: opacity 0.5s ease-in-out; }
    .opacity-0 { opacity: 0; }
    .opacity-100 { opacity: 1; }
    .fade-enter-active, .fade-leave-active { transition: opacity 1.5s ease; }
    .fade-enter-from, .fade-leave-to { opacity: 0; }
    
    #loading-mask {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background: #fff; z-index: 9999;
        display: flex; align-items: center; justify-content: center;
        transition: opacity 0.5s ease;
    }
    #loading-mask.fade-out { opacity: 0; pointer-events: none; }
    
    @keyframes breathe { 0% { transform: scale(1); opacity: 0.8; } 50% { transform: scale(1.1); opacity: 1; } 100% { transform: scale(1); opacity: 0.8; } }
    .logo-breathe { animation: breathe 2s infinite ease-in-out; }
    @keyframes marquee { 0% { transform: translateX(100%); } 100% { transform: translateX(-100%); } }
    .animate-marquee { display: inline-block; white-space: nowrap; animation: marquee 30s linear infinite; padding-left: 100%; }
    .animate-marquee:hover { animation-play-state: paused; }
    .social-bar { position: fixed; right: 0; top: 40%; z-index: 50; display: flex; flex-direction: column; gap: 8px; }
    .social-float-btn { width: 48px; height: 48px; display: flex; align-items: center; justify-content: center; color: white; border-radius: 8px 0 0 8px; box-shadow: -2px 2px 5px rgba(0,0,0,0.2); transition: all 0.3s ease; cursor: pointer; font-size: 24px; }
    .social-float-btn:hover { width: 56px; }
    @media (max-width: 768px) {
        .social-bar { top: auto; bottom: 0; right: 0; left: 0; flex-direction: row; justify-content: space-around; background: white; padding: 10px; box-shadow: 0 -2px 10px rgba(0,0,0,0.1); border-top: 1px solid #eee; }
        .social-float-btn { width: 40px; height: 40px; font-size: 20px; border-radius: 50%; box-shadow: none; }
        .social-float-btn:hover { width: 40px; }
    }
    /* FAQ Style */
    .faq-item { border-bottom: 1px solid #e5e7eb; transition: all 0.3s ease; }
    .faq-item:last-child { border-bottom: none; }
    .faq-question { cursor: pointer; padding: 16px 0; font-weight: bold; color: #374151; display: flex; justify-content: space-between; align-items: center; user-select: none; }
    .faq-answer { max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out; color: #6b7280; line-height: 1.6; }
    .faq-item.active .faq-answer { max-height: 200px; padding-bottom: 16px; }
    .faq-item.active .faq-question { color: #8B0000; }
    .faq-icon { transition: transform 0.3s; }
    .faq-item.active .faq-icon { transform: rotate(180deg); }
  </style>
</head>
<body class="bg-gray-100 font-sans text-gray-800 locked">

  <div id="loading-mask">
      <div class="text-center">
          <img src="https://drive.google.com/thumbnail?id=16UrCpYWRkyEkvL7M73o0DIAvkKWtF0Lp&sz=w200" 
               class="w-20 h-20 rounded-xl mb-4 mx-auto logo-breathe shadow-xl" alt="å·§å“ç å¯¶">
          <p class="text-gray-500 text-sm font-bold tracking-widest">å·§å“ç å¯¶ Â· èª ä¿¡ä¼°åƒ¹ä¸­...</p>
      </div>
  </div>

  <div class="social-bar">
      <a href="https://lin.ee/SDN6jpk" target="_blank" class="social-float-btn bg-[#06C755]" title="åŠ å…¥ LINE@" aria-label="Line"><i class="fab fa-line"></i></a>
      <a href="https://www.facebook.com/QPJEWELRY.OFFICIAL" target="_blank" class="social-float-btn bg-[#1877F2]" title="Facebook" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
      <a href="https://www.instagram.com/qiaopin.jewelry/" target="_blank" class="social-float-btn bg-gradient-to-tr from-yellow-400 via-red-500 to-purple-500" title="Instagram" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
      <a href="https://www.tiktok.com/@qpdiamond666" target="_blank" class="social-float-btn bg-black" title="TikTok" aria-label="TikTok"><i class="fab fa-tiktok"></i></a>
      <button onclick="window.scrollTo({top: 0, behavior: 'smooth'})" class="social-float-btn bg-yellow-500 border border-yellow-600 hidden md:flex" title="Top" aria-label="å›åˆ°é ‚éƒ¨"><i class="fas fa-arrow-up"></i></button>
  </div>

  <div id="app">
    <nav class="bg-white shadow-lg sticky top-0 z-40 relative">
      <div class="max-w-7xl mx-auto px-4">
        <div class="flex justify-between h-20 items-center">
          <div class="flex items-center gap-3 cursor-pointer" @click="goHome">
            <img src="https://drive.google.com/thumbnail?id=16UrCpYWRkyEkvL7M73o0DIAvkKWtF0Lp&sz=w200" 
                 class="w-10 h-10 rounded-lg object-cover border border-yellow-500" alt="å·§å“ç å¯¶ Logo">
            <div><div class="text-2xl font-bold tracking-wider text-red-900">å·§å“ç å¯¶</div><div class="text-xs text-gray-500">HUANG JIA FEI LI</div></div>
          </div>
          <div class="flex items-center space-x-4">
            <button @click="goHome" class="font-medium hover:text-red-800 hidden md:block">ä»Šæ—¥é‡‘åƒ¹</button>
            <button @click="scrollTo('blog-section')" class="font-medium hover:text-red-800 hidden md:block">çŸ¥è­˜å°ˆæ¬„</button>
            <div class="flex items-center gap-2 bg-red-50 px-3 py-1.5 rounded-full border border-red-100"><i class="fas fa-phone-alt text-red-800"></i><span class="font-bold text-red-900 font-nums">0986-821-626</span></div>
          </div>
        </div>
      </div>
    </nav>

    <div class="bg-red-900 text-white text-sm py-2 overflow-hidden relative z-30 shadow-md">
        <div class="animate-marquee">ğŸ“¢ æ­¡è¿å…‰è‡¨å·§å“ç å¯¶ï¼æ¯æ—¥æ›´æ–°æœ€æ–°é»ƒé‡‘ã€ç™½é‡‘ã€Ké‡‘å›æ”¶å ±åƒ¹ã€‚å…¨å°é«˜åƒ¹å›æ”¶ï¼Œèª ä¿¡ç¶“ç‡Ÿï¼Œæ­¡è¿ä¾†é›»æ´½è©¢ 0986-821-626ã€‚</div>
    </div>

    <div v-show="view === 'home'">
      <header class="relative h-[400px] md:h-[500px] flex items-center justify-center overflow-hidden bg-gray-900">
        <transition name="fade">
           <img v-if="heroImages.length > 0" :key="currentHeroIndex" :src="currentHeroImage" class="absolute inset-0 w-full h-full object-cover opacity-70" @error="handleImgError" alt="Banner Image">
        </transition>
        <div v-if="heroImages.length === 0" class="absolute inset-0 bg-gradient-to-r from-gray-900 to-red-900 opacity-90"></div>
        <div class="relative z-10 text-center text-white px-4 max-w-4xl">
          <div class="inline-block px-4 py-1 border-2 border-yellow-400 bg-yellow-900/80 rounded-full text-yellow-300 text-sm font-bold mb-6 backdrop-blur-md text-super-pop shadow-lg">ç¶“ç‡Ÿåé¤˜å¹´ Â· èª ä¿¡è€å­—è™Ÿ</div>
          <h1 class="text-4xl md:text-6xl font-black mb-6 leading-tight text-super-pop">é»ƒé‡‘å›æ”¶ <span class="text-amber-400">åƒ¹å€¼æœ€å¤§åŒ–</span></h1>
          <div class="flex flex-col sm:flex-row gap-4 justify-center">
             <button @click="scrollTo('rates')" class="bg-amber-500 text-slate-900 font-bold py-3 px-10 rounded-full shadow-lg hover:bg-amber-400 transition border-2 border-amber-600">æŸ¥çœ‹ä»Šæ—¥é‡‘åƒ¹</button>
             <button @click="scrollTo('calculator-section')" class="bg-green-600 text-white font-bold py-3 px-10 rounded-full shadow-lg hover:bg-green-500 transition border-2 border-green-700">èˆŠé‡‘å›æ”¶è©¦ç®—</button>
          </div>
        </div>
      </header>

      <main class="max-w-7xl mx-auto px-4 py-12 grid grid-cols-1 lg:grid-cols-12 gap-8 -mt-10 relative z-20 pb-24 md:pb-12">
        <div class="lg:col-span-8 space-y-8">
          <section class="bg-white rounded-2xl shadow-xl p-6">
            <h2 class="text-xl font-bold mb-4 border-l-4 border-red-800 pl-3">é‡‘åƒ¹èµ°å‹¢åœ–</h2>
            <div class="h-64 relative">
               <div v-if="loading" class="absolute inset-0 flex items-center justify-center bg-white/80 z-10"><i class="fas fa-spinner fa-spin text-red-800 text-2xl mr-2"></i> è¼‰å…¥æ•¸æ“šä¸­...</div>
               <div v-if="!loading && (!rawChartData || rawChartData.length === 0)" class="absolute inset-0 flex items-center justify-center text-gray-400">æš«ç„¡æ­·å²èµ°å‹¢æ•¸æ“š</div>
               <canvas id="mainChart"></canvas>
            </div>
          </section>

          <section id="daily-table" class="bg-white rounded-2xl shadow-xl overflow-hidden">
             <div class="p-4 bg-gray-50 flex justify-between items-center border-b">
               <h2 class="text-xl font-bold border-l-4 border-red-800 pl-3">æ¯æ—¥å ±åƒ¹</h2>
               <span class="text-sm font-bold bg-white border px-2 py-1 rounded">å–®ä½: {{ unitText }}</span>
             </div>
             <div class="overflow-x-auto max-h-[600px] overflow-y-auto">
               <table class="w-full min-w-[700px]">
                 <thead class="sticky top-0 z-10 shadow-sm">
                   <tr>
                     <th class="table-header">æ—¥æœŸ</th>
                     <th class="table-header bg-yellow-50 text-yellow-900">é»ƒé‡‘(æ”¶)</th>
                     <th class="table-header bg-yellow-50 text-yellow-900">é»ƒé‡‘(è³£)</th>
                     <th class="table-header">é‰‘é‡‘(æ”¶)</th>
                     <th class="table-header">é‰‘é‡‘(è³£)</th>
                     <th class="table-header">ç™½éŠ€(æ”¶)</th>
                     <th class="table-header">ç™½éŠ€(è³£)</th>
                   </tr>
                 </thead>
                 <tbody>
                   <tr v-for="(row, i) in visibleDailyData" :key="i" class="hover:bg-gray-50 transition-colors">
                     <td class="table-cell text-xs font-mono text-gray-500">{{ row.date }}</td>
                     <td class="table-cell font-bold text-red-600 bg-yellow-50/30">{{ formatPrice(row.gold.buy) }}<span v-html="formatDiff(row.gold.buyDiff, true)"></span></td>
                     <td class="table-cell font-bold text-gray-800 bg-yellow-50/30">{{ formatPrice(row.gold.sell) }}<span v-html="formatDiff(row.gold.sellDiff, true)"></span></td>
                     <td class="table-cell text-slate-700">{{ formatPrice(row.pt.buy) }}<span v-html="formatDiff(row.pt.buyDiff, true)"></span></td>
                     <td class="table-cell text-slate-500">{{ formatPrice(row.pt.sell) }}<span v-html="formatDiff(row.pt.sellDiff, true)"></span></td>
                     <td class="table-cell text-gray-700">{{ formatSilver(row.ag.buy) }}<span v-html="formatSilverDiff(row.ag.buyDiff, true)"></span></td>
                     <td class="table-cell text-gray-500">{{ formatSilver(row.ag.sell) }}<span v-html="formatSilverDiff(row.ag.sellDiff, true)"></span></td>
                   </tr>
                 </tbody>
               </table>
             </div>
             <div v-if="dailyData.length > visibleQuoteCount" class="p-4 text-center bg-gray-50 border-t border-gray-100">
                <button @click="loadMoreQuotes" class="text-sm font-bold text-gray-600 hover:text-red-800 bg-white border border-gray-300 hover:border-red-800 px-6 py-2 rounded-full shadow-sm transition-all duration-300">
                    <i class="fas fa-history mr-2"></i>ç€è¦½æ›´å¤šæ­·å²å ±åƒ¹ ({{ visibleQuoteCount }} / {{ dailyData.length }})
                </button>
             </div>
          </section>

          <section class="bg-white rounded-2xl shadow-xl p-6" v-if="faqList.length > 0">
             <h2 class="text-xl font-bold mb-4 border-l-4 border-red-800 pl-3">å¸¸è¦‹å•é¡Œ FAQ</h2>
             <div class="space-y-2">
                 <div class="faq-item" v-for="(item, index) in faqList" :key="index" @click="toggleFaq($event)">
                     <div class="faq-question">{{ item.q }} <i class="fas fa-chevron-down faq-icon"></i></div>
                     <div class="faq-answer">{{ item.a }}</div>
                 </div>
             </div>
          </section>

          <section id="blog-section">
            <div class="flex justify-between items-end mb-6">
                <h2 class="text-2xl font-bold text-gray-800 border-l-4 border-red-800 pl-3">ğŸ“š é»ƒé‡‘å›æ”¶çŸ¥è­˜å°ˆæ¬„</h2>
            </div>
            <div class="grid md:grid-cols-2 gap-6" :class="{ 'interaction-disabled': !canClick }">
               <div v-for="article in visibleArticles" :key="article.id" class="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-md transition cursor-default group">
                  <div class="h-48 bg-gray-200 relative overflow-hidden cursor-pointer" @click.stop="openArticle(article, $event)">
                     <div class="absolute inset-0 flex items-center justify-center text-gray-400"><i class="fas fa-image text-3xl"></i></div>
                     <img :src="article.image || 'https://via.placeholder.com/600x400?text=No+Image'" class="absolute inset-0 w-full h-full object-cover transition-transform duration-700 group-hover:scale-105" :class="article.imgLoaded ? 'opacity-100' : 'opacity-0'" @load="article.imgLoaded = true" @error="article.imgLoaded = false" alt="Article Thumbnail">
                     <div class="absolute top-0 right-0 bg-red-800 text-white text-xs font-bold px-3 py-1 rounded-bl-lg">{{ article.date }}</div>
                  </div>
                  <div class="p-5">
                    <h3 class="font-bold text-lg text-gray-800 mb-2 truncate cursor-pointer group-hover:text-red-800 transition" @click.stop="openArticle(article, $event)">{{ article.title || 'ç„¡æ¨™é¡Œ' }}</h3>
                    <p class="text-sm text-gray-600 line-clamp-2 mb-4">{{ article.summary }}</p>
                    <div class="flex justify-end"><span class="text-red-800 text-sm font-bold cursor-pointer group-hover:translate-x-1 transition-transform inline-block" @click.stop="openArticle(article, $event)">é–±è®€æ›´å¤š <i class="fas fa-arrow-right ml-1"></i></span></div>
                  </div>
               </div>
            </div>
            <div v-if="articles.length === 0" class="text-center py-12 bg-white rounded-xl border border-dashed border-gray-300 text-gray-400 mt-4"><i class="fas fa-book-open text-4xl mb-3 opacity-30"></i><p>ç›®å‰å°šç„¡æ–‡ç« ï¼Œæ•¬è«‹æœŸå¾…ã€‚</p></div>
            <div v-if="articles.length > visibleCount" class="text-center mt-10 mb-6">
               <button @click="loadMoreArticles" class="group relative px-8 py-3 bg-white text-red-900 font-bold rounded-full border-2 border-red-100 hover:border-red-800 hover:bg-red-800 hover:text-white transition-all duration-300 shadow-sm hover:shadow-lg">
                   <span class="relative z-10 flex items-center gap-2">ç€è¦½æ›´å¤šçŸ¥è­˜ <i class="fas fa-chevron-down group-hover:animate-bounce"></i></span>
               </button>
               <p class="text-xs text-gray-400 mt-2">é¡¯ç¤ºç¬¬ {{ visibleCount + 1 }} - {{ Math.min(visibleCount + 10, articles.length) }} å‰‡èˆŠæ–‡ç« </p>
            </div>
          </section>
        </div>

        <aside class="lg:col-span-4 space-y-6">
          <div id="rates" class="bg-white rounded-2xl shadow-xl border-t-4 border-red-800 sticky top-24 overflow-hidden">
             <div class="p-5 bg-gradient-to-b from-gray-50 to-white border-b flex justify-between items-start">
               <div><h3 class="font-bold text-red-900 text-lg">ä»Šæ—¥ç‰Œåƒ¹</h3><p class="text-xs text-gray-500 mt-1">{{ updateTime }}</p></div>
               <button @click="toggleUnit" class="text-xs bg-gray-800 text-white hover:bg-black px-3 py-1.5 rounded shadow transition">å–®ä½: <span class="text-amber-400 font-bold">{{ unitText }}</span></button>
             </div>
             <div class="bg-red-50 p-4 m-4 rounded-xl border border-red-100">
               <div class="flex justify-between text-sm mb-2 font-bold text-red-800"><span>é»ƒé‡‘ (24K)</span> <i class="fas fa-crown text-amber-500"></i></div>
               <div class="flex justify-between">
                  <div class="text-center w-1/2 border-r border-red-200">
                      <div class="text-xs text-gray-500">å›æ”¶(Buy)</div>
                      <div class="text-2xl font-bold text-green-600">{{ formatPrice(rates['24K'].buy) }}</div>
                      <div class="text-xs" v-html="formatDiff(rates['24K'].buyDiff)"></div>
                  </div>
                  <div class="text-center w-1/2">
                      <div class="text-xs text-gray-500">è³£å‡º(Sell)</div>
                      <div class="text-xl font-bold text-blue-600">{{ formatPrice(rates['24K'].sell) }}</div>
                      <div class="text-xs" v-html="formatDiff(rates['24K'].sellDiff)"></div>
                  </div>
               </div>
             </div>
             <div id="calculator-section" class="bg-gray-900 p-5 text-white">
               <div class="flex justify-between items-center mb-4">
                  <h4 class="font-bold text-amber-400 flex items-center gap-2"><i class="fas fa-calculator"></i> é»ƒé‡‘å›æ”¶è©¦ç®—</h4>
                  <button @click="toggleCalcUnit" class="text-base font-bold bg-yellow-400 text-gray-900 px-4 py-2 rounded-lg shadow-lg hover:bg-yellow-300 transition transform active:scale-95 border-2 border-yellow-500">å–®ä½: {{ calcUnit === 'qian' ? 'å°éŒ¢' : 'å…¬å…‹'}}</button>
               </div>
               <div class="space-y-3">
                 <div class="flex gap-2">
                   <select v-model="calcMetal" class="bg-gray-800 border-gray-700 rounded p-3 text-base w-1/3 outline-none" aria-label="é¸æ“‡é‡‘å±¬é¡å‹"><option value="24K">24K</option><option value="18K">18K</option><option value="Pt">é‰‘é‡‘</option></select>
                   <input type="number" v-model="calcWeight" class="w-full bg-gray-800 border-gray-700 rounded p-3 text-base text-right font-nums outline-none" placeholder="è¼¸å…¥é‡é‡" aria-label="è¼¸å…¥é‡é‡">
                 </div>
                 <div class="flex justify-between items-center bg-gray-800/50 p-3 rounded border border-gray-700">
                   <span class="text-sm text-gray-400">é ä¼°åƒ¹å€¼</span><span class="text-2xl font-bold text-amber-400">$ {{ calculateTotal }}</span>
                 </div>
                 <button v-if="calcWeight && calculateTotal !== '0'" @click="bookNow" class="w-full bg-green-500 text-white font-bold py-3 rounded text-base hover:bg-green-600 shadow-lg flex items-center justify-center gap-2 animate-pulse"><i class="fab fa-line text-xl"></i> ç”¨æ­¤åƒ¹æ ¼é ç´„è³£å‡º</button>
                 <button v-else class="w-full bg-amber-500 text-gray-900 font-bold py-3 rounded text-base hover:bg-amber-400 shadow-lg">ç«‹å³è‡´é›»é–åƒ¹</button>
               </div>
             </div>
             <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                <h3 class="font-bold text-gray-800 mb-4 border-l-4 border-red-800 pl-2">è¯çµ¡æˆ‘å€‘</h3>
                <div class="space-y-4 text-sm text-gray-700">
                    <div class="flex items-start gap-3"><i class="fas fa-clock text-red-800 mt-1"></i><div><span class="font-bold block text-gray-900">ç‡Ÿæ¥­æ™‚é–“</span>è²´é‡‘å±¬è²·è³£ 11:00~03:30</div></div>
                    <div class="flex items-start gap-3"><i class="fas fa-map-marker-alt text-red-800 mt-1"></i><div><span class="font-bold block text-gray-900">é–€å¸‚åœ°å€</span><a href="https://www.google.com/maps/search/?api=1&query=å°åŒ—å¸‚å¤§å®‰å€æ¿Ÿå—è·¯ä¸‰æ®µ62-1è™Ÿ1æ¨“" target="_blank" class="hover:text-red-800 transition">å°åŒ—å¸‚å¤§å®‰å€æ¿Ÿå—è·¯ä¸‰æ®µ62-1è™Ÿ1æ¨“</a></div></div>
                    <div class="flex items-start gap-3"><i class="fas fa-phone-alt text-red-800 mt-1"></i><div><span class="font-bold block text-gray-900">é ç´„å°ˆç·š</span><a href="tel:0986821626" class="text-lg font-bold text-red-800">0986-821-626</a></div></div>
                </div>
             </div>
          </div>
        </aside>
      </main>
    </div>

    <div v-if="view === 'article' && currentArticle" class="bg-white min-h-screen">
       <div class="max-w-4xl mx-auto px-4 py-12">
         <button @click="goHome" class="mb-6 flex items-center gap-2 text-gray-600 hover:text-red-800 font-bold px-4 py-2 bg-gray-50 rounded shadow-sm transition"><i class="fas fa-arrow-left"></i> è¿”å›é¦–é </button>
         <article class="bg-white rounded-2xl shadow-xl overflow-hidden border border-gray-100">
           <div class="w-full h-[300px] md:h-[400px] bg-gray-200 relative bg-gray-100">
             <div class="absolute inset-0 flex items-center justify-center text-gray-400"><i class="fas fa-image text-4xl"></i></div>
             <img v-if="currentArticle.image" :src="currentArticle.image" class="absolute inset-0 w-full h-full object-cover transition-opacity duration-500" :class="currentImgLoaded ? 'opacity-100' : 'opacity-0'" @load="currentImgLoaded = true" @error="currentImgLoaded = false" alt="Cover Image">
           </div>
           <div class="p-8 md:p-12">
             <div class="flex items-center gap-4 mb-6 text-sm text-gray-500"><span class="bg-red-100 text-red-800 px-3 py-1 rounded-full text-xs font-bold">çŸ¥è­˜å°ˆæ¬„</span><span>{{ currentArticle.date }}</span></div>
             <h1 class="text-3xl md:text-4xl font-bold text-gray-900 mb-8 leading-tight">{{ currentArticle.title }}</h1>
             <div class="article-body text-lg text-gray-700 border-t border-gray-100 pt-8" v-html="currentArticle.content"></div>
             <hr class="my-10 border-gray-200">
             <div class="bg-gray-50 p-8 rounded-xl border border-gray-200 text-center">
               <h3 class="font-bold text-gray-800 text-xl mb-2">æ‰‹ä¸Šæœ‰é»ƒé‡‘æƒ³è®Šç¾å—ï¼Ÿ</h3>
               <p class="text-gray-600 mb-6">ä½¿ç”¨æˆ‘å€‘çš„ç·šä¸Šå·¥å…·ï¼Œ3ç§’ç®—å‡ºæœ€æ–°å›æ”¶åƒ¹ã€‚</p>
               <button @click="goHome" class="bg-amber-500 text-slate-900 font-bold py-3 px-10 rounded-full shadow-lg hover:bg-amber-400 transition transform hover:-translate-y-1">å‰å¾€ç·šä¸Šè©¦ç®—</button>
             </div>
           </div>
         </article>
       </div>
       <footer class="bg-gray-900 text-gray-400 py-10 border-t border-gray-800 text-center text-xs"><p>Â© 2025 å·§å“ç å¯¶. ç‰ˆæ¬Šæ‰€æœ‰.</p></footer>
    </div>
  </div>

  <script>
    const { createApp } = Vue;

    // â˜…â˜…â˜… å‹™å¿…æ›¿æ›ç‚ºæ‚¨çš„ GAS éƒ¨ç½²ç¶²å€ â˜…â˜…â˜…
    const GAS_API_URL = 'https://script.google.com/macros/s/AKfycbz......(è«‹æ›æˆæ‚¨çš„ç¶²å€)....../exec';

    createApp({
      data() {
        return {
          view: 'home', 
          currentArticle: null,
          currentImgLoaded: false, 
          heroImages: [], currentHeroIndex: 0, updateTime: 'è¼‰å…¥ä¸­...', unit: 'qian', loading: false,
          calcUnit: 'qian', calcMetal: '24K', calcWeight: '',
          rates: { '24K': {buy:0, sell:0}, '18K': {buy:0}, 'Pt': {buy:0}, 'Pd': {buy:0}, '22K': {buy:0}, 'Ag': {buy999:0} },
          dailyData: [], rawChartData: [], chartLabels: [], chartInstance: null,
          articles: [], faqList: [],
          visibleCount: 4, 
          visibleQuoteCount: 20,
          canClick: false
        }
      },
      computed: {
        unitText() { return this.unit === 'qian' ? 'å°éŒ¢' : 'å…¬å…‹'; },
        silverUnitText() { return this.unit === 'qian' ? 'å…¬æ–¤' : 'å…¬å…‹'; },
        currentHeroImage() { 
           if(this.heroImages.length === 0) return 'https://via.placeholder.com/1920x600?text=No+Images';
           // â˜…â˜…â˜… è‡ªå‹•å„ªåŒ– Hero åœ–ç‰‡ â˜…â˜…â˜…
           return this.getOptimizedUrl(this.heroImages[this.currentHeroIndex], 1200); 
        },
        calculateTotal() {
          if(!this.calcWeight) return 0;
          let rawPrice = 0;
          if (this.rates && this.rates[this.calcMetal]) rawPrice = this.rates[this.calcMetal].buy;
          if (this.calcUnit === 'qian') return Math.floor(this.calcWeight * rawPrice).toLocaleString();
          else return Math.floor(this.calcWeight * (rawPrice / 3.75)).toLocaleString();
        },
        visibleArticles() { return this.articles.slice(0, this.visibleCount); },
        visibleDailyData() { return this.dailyData.slice(0, this.visibleQuoteCount); }
      },
      methods: {
        // â˜…â˜…â˜… æ ¸å¿ƒåœ–ç‰‡å„ªåŒ–å‡½å¼ (ä½¿ç”¨ wsrv.nl) â˜…â˜…â˜…
        getOptimizedUrl(originalUrl, width = 800) {
            if (!originalUrl) return "https://via.placeholder.com/600x400?text=No+Image";
            let id = "";
            const match = originalUrl.match(/id=([-\w]{25,})/) || originalUrl.match(/\/d\/([-\w]{25,})/);
            if (match) {
                id = match[1];
                // ä½¿ç”¨ wsrv.nl åŠ é€Ÿã€è½‰ WebPã€å¿«å–
                return `https://wsrv.nl/?url=https://drive.google.com/uc?id=${id}&w=${width}&output=webp&q=80&n=-1`;
            }
            return originalUrl;
        },

        toggleFaq(event) { event.currentTarget.classList.toggle('active'); },
        scrollTo(id) { 
          if(this.view !== 'home') {
             this.view = 'home';
             this.$nextTick(() => { const el = document.getElementById(id); if(el) el.scrollIntoView({ behavior: 'smooth' }); });
          } else { const el = document.getElementById(id); if(el) el.scrollIntoView({ behavior: 'smooth' }); }
        },
        toggleUnit() { this.unit = this.unit === 'qian' ? 'gram' : 'qian'; },
        toggleCalcUnit() { this.calcUnit = this.calcUnit === 'qian' ? 'gram' : 'qian'; },
        startCarousel() { if(this.heroImages.length > 1) { setInterval(() => { this.currentHeroIndex = (this.currentHeroIndex + 1) % this.heroImages.length; }, 5000); } },
        formatPrice(v) { if(!v) return "0"; return this.unit === 'qian' ? Math.floor(v).toLocaleString() : Math.floor(v / 3.75).toLocaleString(); },
        formatSilver(v) { if(!v) return "0"; let val = parseFloat(v); return this.unit === 'qian' ? Math.floor(val).toLocaleString() : (val / 1000).toFixed(2); },
        formatDiff(diff, isTable = false) {
            if(!diff || diff === 0) return isTable ? '' : '<span class="text-gray-400">-</span>';
            const unitDiff = (this.unit === 'qian') ? diff : (diff / 3.75);
            const val = Math.floor(Math.abs(unitDiff)).toLocaleString();
            if(isTable) return diff > 0 ? `<span class="ml-1 text-red-600 text-xs">â–²${val}</span>` : `<span class="ml-1 text-green-600 text-xs">â–¼${val}</span>`;
            return diff > 0 ? `<span class="text-red-600 text-xs font-bold">â–² ${val}</span>` : `<span class="text-green-600 text-xs font-bold">â–¼ ${val}</span>`;
        },
        formatSilverDiff(diff, isTable = false) {
            if(!diff || diff === 0) return isTable ? '' : '<span class="text-gray-400">-</span>';
            const unitDiff = (this.unit === 'qian') ? diff : (diff / 1000);
            const val = Math.abs(unitDiff).toLocaleString(undefined, { minimumFractionDigits: this.unit === 'qian' ? 0 : 2, maximumFractionDigits: 2 });
            if(isTable) return diff > 0 ? `<span class="ml-1 text-red-600 text-xs">â–²${val}</span>` : `<span class="ml-1 text-green-600 text-xs">â–¼${val}</span>`;
            return '';
        },
        bookNow() {
            const unit = this.calcUnit === 'qian' ? 'å°éŒ¢' : 'å…¬å…‹';
            const msg = `ä½ å¥½ï¼Œæˆ‘å‰›å‰›åœ¨å®˜ç¶²è©¦ç®— ${this.calcMetal} ${this.calcWeight}${unit}ï¼Œé ä¼°åƒ¹æ ¼ $${this.calculateTotal}ï¼Œæƒ³é ç´„æ™‚é–“è³£å‡ºã€‚`;
            navigator.clipboard.writeText(msg).then(() => { alert("å·²è¤‡è£½é ç´„è¨Šæ¯ï¼å³å°‡ç‚ºæ‚¨æ‰“é–‹ LINE..."); window.open("https://lin.ee/SDN6jpk", "_blank"); }).catch(err => { window.open("https://lin.ee/SDN6jpk", "_blank"); });
        },
        handleImgError(e) { e.target.src = "https://via.placeholder.com/600x400?text=No+Image"; }, 
        
        loadMoreArticles() { this.visibleCount += 10; },
        loadMoreQuotes() { this.visibleQuoteCount += 20; },
        
        initChart(labels, data) {
          const ctx = document.getElementById('mainChart'); if(!ctx || !data || data.length === 0) return;
          if(this.chartInstance) this.chartInstance.destroy();
          let d = this.unit === 'qian' ? data : data.map(v => v / 3.75);
          this.chartInstance = new Chart(ctx, { type: 'line', data: { labels: labels, datasets: [{ label: 'å›æ”¶åƒ¹', data: d, borderColor: '#D4AF37', backgroundColor: 'rgba(212, 175, 55, 0.1)', borderWidth: 2, fill: true, tension: 0.1 }] }, options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { y: { grid: { color: '#f3f4f6' } }, x: { grid: { display: false } } } } });
        },
        goHome() {
           this.view = 'home'; this.currentArticle = null;
           window.history.replaceState(null, null, window.location.pathname);
           this.$nextTick(() => { this.updateChartOnUnitChange(); window.scrollTo(0, 0); });
        },
        openArticle(article, event) {
           if (!event || !event.isTrusted || !this.canClick) return;
           
           // â˜…â˜…â˜… é»é–‹æ–‡ç« æ™‚ä¹Ÿå³æ™‚å„ªåŒ–åœ–ç‰‡ â˜…â˜…â˜…
           let fastImage = this.getOptimizedUrl(article.image, 800);
           this.currentArticle = { ...article, image: fastImage };
           
           this.currentImgLoaded = false; this.view = 'article';
           window.history.pushState({}, '', '?p=article&id=' + article.id); window.scrollTo(0, 0);
        },
        unlockBody() {
            window.scrollTo(0, 0); document.body.classList.remove('locked');
            const mask = document.getElementById('loading-mask'); if(mask) mask.classList.add('fade-out');
            setTimeout(() => { if(mask) mask.style.display = 'none'; }, 600); setTimeout(() => { this.canClick = true; }, 1000);
        },
        updateChartOnUnitChange() { if(this.rawChartData && this.rawChartData.length > 0 && this.view === 'home') { this.initChart(this.chartLabels, this.rawChartData); } },
        
        async fetchData() {
            try {
                // 1. å–å¾—åˆå§‹åŒ–è³‡æ–™ (Rates & FAQ)
                const initRes = await fetch(GAS_API_URL + '?action=getInitData');
                const initData = await initRes.json();
                if(initData.rates) {
                    this.rates = initData.rates.rates;
                    this.updateTime = initData.rates.updatedAt;
                    if(initData.rates.heroImages) { this.heroImages = initData.rates.heroImages; this.startCarousel(); }
                }
                if(initData.faq) this.faqList = initData.faq;

                // 2. å–å¾—åœ–è¡¨èˆ‡å ±åƒ¹
                this.loading = true;
                const chartRes = await fetch(GAS_API_URL + '?action=getChartData');
                const chartData = await chartRes.json();
                this.loading = false;
                if(chartData.dailyTable) this.dailyData = chartData.dailyTable;
                if(chartData.chart) { 
                    this.rawChartData = chartData.chart.data; 
                    this.chartLabels = chartData.chart.labels;
                    if(this.view === 'home') this.initChart(this.chartLabels, this.rawChartData);
                }

                // 3. å–å¾—æ–‡ç« 
                const articleRes = await fetch(GAS_API_URL + '?action=getArticles');
                const articleList = await articleRes.json();
                
                // â˜…â˜…â˜… é å…ˆå„ªåŒ–åˆ—è¡¨ç¸®åœ– (å¯¬åº¦600) â˜…â˜…â˜…
                this.articles = (articleList || []).map(a => ({ 
                    ...a, 
                    image: this.getOptimizedUrl(a.image, 600),
                    imgLoaded: false 
                }));

                // è§£é–ç•«é¢
                this.unlockBody();
                
            } catch(e) { console.error("Fetch Error:", e); this.unlockBody(); }
        }
      },
      watch: { unit() { this.updateChartOnUnitChange(); } },
      mounted() { 
          if ('scrollRestoration' in history) { history.scrollRestoration = 'manual'; }
          const url = new URL(window.location.href);
          if (url.searchParams.has('id')) { url.searchParams.delete('id'); url.searchParams.delete('p'); window.history.replaceState(null, null, url.pathname); }
          this.fetchData(); // å•Ÿå‹•æŠ“å–
      }
    }).mount('#app');
  </script>
</body>
</html>
